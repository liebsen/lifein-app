;var currentnode='/cuentas/'+key,cuentas=firebase.database().ref(currentnode),datosdeapoyo={},anim=LI.animation,showItem=function(a){$('body').attr('key',a);LI.setScroll();$('.spinner').fadeIn(anim.fadeIn*anim.factor,function(){firebase.database().ref(currentnode+'/'+a).once('value').then(function(a){var e=a.val();$('#detail').html($.templates('#form').render({key:a.key,data:e,datosdeapoyo:datosdeapoyo},LI.aux)).promise().done(function(){$('.lista').fadeOut(anim.fadeOut,function(){$('.spinner').fadeOut(anim.fadeOut*anim.factor,function(){$('#detail').delay(200).fadeIn(anim.fadeOut*anim.factor,function(){LI.initAutocomplete('direccion');if(e.geo){$('#direccion').attr('lat',e.geo.lat).attr('lng',e.geo.lng);LI.controls()}})})})})})})};cuentas.once('value').then(function(a){if(!a.val()){$('.spinner').fadeOut(anim.fadeOut,function(){$('.lista').delay(anim.delay).fadeIn()})}});firebase.database().ref('/datosdeapoyo').once('value').then(function(a){datosdeapoyo=a.val()});$(document).on('submit','#firebase-form',function(a){a.preventDefault();var e=$(this).serializeObject(),o={},t=null,n=$(this).attr('key'),i=$('#direccion').attr('lat'),d=$('#direccion').attr('lng');e.aprobado=e.aprobado?1:0;if(i&&d){e.geo={lat:i,lng:d}};if(n){o[currentnode+'/'+n]=e}
else{var t=cuentas.push().key;n=t;o[currentnode+'/'+n]=e};$('.spinner').fadeIn(anim.fadeIn,function(){firebase.database().ref().update(o,function(a){if(a){console.log(a)}
else{if(t){var n=e;n.password=LI.randomString(12);LI.createAccount('email',n).then(function(){LI.resetScroll();$('.spinner').fadeOut(anim.fadeOut*anim.factor,function(){location.hash=''})})}
else{LI.resetScroll();$('.spinner').fadeOut(anim.fadeOut*anim.factor,function(){location.hash=''})}}})});return!1});$(document).on('click','.action.eliminar',function(){var a=$(this).data('key');swal({title:'Borrar cuenta',text:'Seguro que querÃ©s eliminar esta cuenta?',type:'warning',showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,},function(){firebase.database().ref(currentnode+'/'+a).remove().then(function(){swal.close()})})});$(document).on('click','.cerrar',function(){location.hash=''});$(function(){$(window).on('hashchange',function(){if(location.hash=='#add'){$('#detail').html($.templates('#form').render({key:null,data:null,datosdeapoyo:datosdeapoyo},LI.aux)).promise().done(function(){$('.lista').fadeOut(anim.fadeOut,function(){$('#detail').delay(200).fadeIn(anim.fadeOut*anim.factor,function(){$('.spinner').fadeOut(anim.fadeIn*anim.factor,function(){$('body,html').scrollTop(0)});LI.initAutocomplete('direccion')})})})}
else if(location.hash!=''){showItem(location.hash.replace('#',''))}
else{$('#detail').fadeOut(anim.fadeOut,function(){$('.lista').delay(anim.delay).fadeIn(anim.fadeIn,function(){LI.resetScroll()})})}}).trigger('hashchange')});cuentas.on('child_added',(data)=>{$('#list').prepend($.templates('#item').render({key:data.key,data:data.val()},LI.aux)).promise().done(function(){$('#list').find('#'+data.key).animateAdded()});if(location.hash===''){$('.spinner').fadeOut(anim.fadeOut)}});cuentas.on('child_changed',(data)=>{var index=$('#'+data.key).index();$('#'+data.key).remove();$('#list').insertAt(index,$.templates('#item').render({key:data.key,data:data.val()},LI.aux));$('#'+data.key).animateChanged()});cuentas.on('child_removed',(data)=>{$('#'+data.key).animateRemoved(function(){$(this).remove()})});