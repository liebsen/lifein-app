{% extends "layouts/default.html" %}

{% block head %}
  <title>{{app_title}} Top 10</title>
{% endblock %}

{% block body %}

    <div class="lista">
      <h3>Top 10</h3>
      <form class="topsongs w-clearfix" id="form">
        <div class="subnav">
          <input class="w-button add-song" type="button" value="Agregar Canción">
        </div>
        <div class="w-clearfix lista-wide" id="list"></div>
      </form>
      <div class="w-form-done">
        <div>El Top 10 se actualizó correctamente</div>
      </div>
      <div class="w-form-fail">
        <div>Hubo un error por favor volvé a intentarlo</div>
      </div>
    </div>

    <script id="item" type="text/x-jsrender">
      <div class="song" id="[[:key]]" json='[[:~toJSON(#data)]]'>
        <div class="eliminar"></div>
        <h4>Top [[:i]]</h4>
        <label for="cancion-2">Canción</label>
        <input class="input w-input" maxlength="256" name="titulo" placeholder="Nombre de la canción" type="text" value="[[if data && data.name]][[:data.name]][[/if]]">
        <div class="spotify-box"></div>
        <div class="spotify-maybother">
          <label for="artista-2">Artista</label>
          <input class="input w-input" maxlength="256" name="artista" placeholder="Nombre del artista o grupo" type="text" value="[[if data && data.artists]][[:~spotify.getArtists(data.artists)]][[/if]]" disabled>
          <label for="cancion-2">Album</label>
          <input class="input w-input" maxlength="256" name="album" placeholder="Nombre del album" type="text" value="[[if data && data.album.name]][[:data.album.name]][[/if]]"  disabled>
          <label for="cancion">Imagen del album</label>
          <img src="[[if data && data.album && data.album.images]][[:data.album.images[2].url]][[else]]/images/album-cover.png[[/if]]" />
          <ul class="w-nav-menu">
          [[if data && data.album && data.album.images]][[for data.album.images]]
            <li><a href="[[:url]]" target="_blank">[[:width]]x[[:height]]px</a></li>
          [[/for]][[/if]]
          </ul>
        </div>
      </div>
    </script>

    <script id="spotify_track" type="text/x-jsrender">
      <div class="track[[if ~isActive(id)]] selected[[/if]]" json='[[:~toJSON(#data)]]'>
        <img src="[[:album.images[2].url]]">
        <div class="text">
          <p>[[:name]]</p>
          <p class="text-muted">[[:album.name]]</p>
        [[if artists.length]]
          <p class="text-link">[[for artists]][[:name]] [[/for]]</p>
        [[/if]]          
        </div>
      </div>
    </script>

{% endblock %}

{% block assets %}

    <script src="/js/jquery-ui.js?_={{ rev_parse }}" type="text/javascript"></script>
    <script src="/js/jquery.ui.touch-punch.min.js?_={{ rev_parse }}" type="text/javascript"></script>
    <script src="/js/firespotify.js" type="text/javascript"></script>
    <script src="/js/top10.js" type="text/javascript"></script>    

{% endblock %}